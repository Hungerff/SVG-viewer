<!DOCTYPE html>
<html>
<head>
    <title>SVG Gallery Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #1a1a1a;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            min-height: 100vh;
        }

        .header {
            background-color: #2d2d2d;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .file-input {
            margin: 20px auto;
            padding: 2rem;
            border: 2px dashed #444;
            border-radius: 12px;
            text-align: center;
            max-width: 600px;
            background-color: #2d2d2d;
            transition: all 0.3s ease;
        }

        .file-input:hover {
            border-color: #666;
            background-color: #333;
        }

        input[type="file"] {
            display: none;
        }

        .upload-button {
            background-color: #4a90e2;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            display: inline-block;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .upload-button:hover {
            background-color: #357abd;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 24px;
            padding: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .image-container {
            background-color: #2d2d2d;
            border-radius: 12px;
            padding: 16px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .image-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }

        .image-container img {
            width: 100%;
            height: 200px;
            object-fit: contain;
            border-radius: 8px;
            background-color: #222;
            margin-bottom: 12px;
        }

        .filename {
            word-break: break-all;
            font-size: 14px;
            color: #bebebe;
            padding: 8px;
            background-color: #222;
            border-radius: 6px;
            text-align: center;
        }

        .drop-zone {
            border: 2px dashed #4a90e2;
        }

        .status {
            margin-top: 12px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>SVG Gallery Viewer</h1>
    </div>
    
    <div class="file-input" id="dropZone">
        <label class="upload-button" for="fileInput">
            Choose JS File or Drag & Drop
        </label>
        <input type="file" id="fileInput" accept=".js">
        <div class="status" id="status"></div>
    </div>

    <div id="gallery" class="gallery"></div>

    <script>
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const status = document.getElementById('status');

        // Drag and drop handling
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, unhighlight, false);
        });

        function highlight(e) {
            dropZone.classList.add('drop-zone');
        }

        function unhighlight(e) {
            dropZone.classList.remove('drop-zone');
        }

        dropZone.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const file = dt.files[0];
            handleFile(file);
        }

        fileInput.addEventListener('change', function(e) {
            handleFile(e.target.files[0]);
        });

        function handleFile(file) {
            if (!file) return;
            
            status.textContent = 'Processing file...';
            const reader = new FileReader();

            reader.onload = function(e) {
                const content = e.target.result;
                const svgRegex = /['"](.*?\.svg)['"]/g;
                const matches = Array.from(content.matchAll(svgRegex));
                const gallery = document.getElementById('gallery');
                gallery.innerHTML = '';

                status.textContent = `Found ${matches.length} SVG files`;

                matches.forEach(match => {
                    const svgPath = match[1];
                    const fileName = svgPath.split('/').pop();
                    const fullPath = `https://tankionline.com/play/static/images/${fileName}`;

                    const container = document.createElement('div');
                    container.className = 'image-container';

                    const img = document.createElement('img');
                    img.src = fullPath;
                    img.alt = fileName;
                    img.loading = 'lazy';
                    img.onerror = () => {
                        img.src = '/api/placeholder/200/200';
                        img.alt = 'Failed to load';
                    };

                    const name = document.createElement('div');
                    name.className = 'filename';
                    name.textContent = fileName;

                    container.appendChild(img);
                    container.appendChild(name);
                    gallery.appendChild(container);
                });
            };

            reader.readAsText(file);
        }
    </script>
</body>
</html>
